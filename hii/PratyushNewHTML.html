<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Vintage Car Auction</title>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
        <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
        <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f6fa;
      color: #23272f;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, #1a2238 70%, #283655 100%);
      padding: 24px 0 18px 0;
      text-align: left;
      color: #fff;
      box-shadow: 0 4px 24px rgba(30,40,60,0.08);
      position: relative;
    }
    .header-content {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      font-size: 2.2em;
      font-weight: 700;
      letter-spacing: 2px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo i {
      font-size: 1.2em;
      color: #ffd700;
    }
    .header-actions {
      display: flex;
      gap: 18px;
      align-items: center;
    }
    .dark-mode-btn, #logoutBtn {
      padding: 10px 22px;
      background: #ffd700;
      color: #1a2238;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1.1em;
      border: none;
      font-weight: 600;
      transition: background 0.3s, color 0.3s;
      box-shadow: 0 2px 8px rgba(30,40,60,0.04);
    }
    .dark-mode-btn:hover, #logoutBtn:hover {
      background: #23272f;
      color: #ffd700;
    }
    #logoutBtn {
      display: none;
    }
    .container {
      width: 95%;
      max-width: 1200px;
      margin: 32px auto 0 auto;
    }
    .overview {
      background: linear-gradient(135deg, #23272f 70%, #283655 100%);
      padding: 48px 32px;
      margin-top: 30px;
      border-radius: 18px;
      box-shadow: 0 6px 32px rgba(30,40,60,0.10);
      color: #fff;
      text-align: center;
    }
    .overview h2, .overview h3 {
      font-family: 'Bebas Neue', cursive, sans-serif;
      letter-spacing: 2px;
      font-weight: 400;
      text-transform: uppercase;
    }
    .overview p, .overview ul li {
      font-size: 1.25em;
      margin-bottom: 10px;
    }
    .overview ul {
      list-style: none;
      padding: 0;
      margin-bottom: 28px;
    }
    .overview button {
      padding: 16px 36px;
      background: #ffd700;
      color: #1a2238;
      border: none;
      border-radius: 32px;
      font-size: 1.3em;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(30,40,60,0.06);
      transition: background 0.3s, color 0.3s;
    }
    .overview button:hover {
      background: #23272f;
      color: #ffd700;
    }
    .login-form {
      background: #fff;
      padding: 36px 28px;
      border-radius: 16px;
      box-shadow: 0 4px 24px rgba(30,40,60,0.10);
      max-width: 400px;
      margin: 32px auto;
      text-align: center;
    }
    .login-form input {
      padding: 14px;
      margin: 12px 0;
      width: 100%;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 1.1em;
      background: #f9f9f9;
      transition: border 0.2s;
    }
    .login-form input:focus {
      border: 2px solid #ffd700;
      outline: none;
    }
    .login-form button {
      padding: 14px 0;
      background: linear-gradient(90deg, #ffd700 60%, #ffb300 100%);
      color: #23272f;
      border: none;
      border-radius: 30px;
      font-size: 1.2em;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: background 0.3s, color 0.3s;
    }
    .login-form button:hover {
      background: #23272f;
      color: #ffd700;
    }
    #mainContent {
      display: none;
    }
    .car {
      background: #fff;
      margin-bottom: 32px;
      border-radius: 18px;
      box-shadow: 0 4px 24px rgba(30,40,60,0.10);
      padding: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: box-shadow 0.2s;
    }
    .car:hover {
      box-shadow: 0 8px 32px rgba(40,54,85,0.13);
    }
    .car img {
      width: 340px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(30,40,60,0.08);
      border: 3px solid #ffd70033;
      background: #fff;
    }
    .car-details {
      flex-grow: 1;
      margin-left: 32px;
      min-width: 0;
    }
    .car-details h2 {
      font-size: 2em;
      margin: 0 0 8px 0;
      color: #1a2238;
      font-weight: 700;
    }
    .car-details p {
      margin: 6px 0;
      font-size: 1.1em;
    }
    .timer {
      font-weight: 600;
      color: #283655;
    }
    .bid-section {
      min-width: 220px;
      text-align: right;
    }
    .bid-section label {
      font-weight: 600;
      margin-bottom: 6px;
      display: block;
    }
    .bid-section input {
      padding: 10px;
      width: 120px;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 1.1em;
      margin-bottom: 8px;
      background: #f9f9f9;
      transition: border 0.2s;
    }
    .bid-section input:focus {
      border: 2px solid #ffd700;
      outline: none;
    }
    .bid-section button {
      padding: 10px 24px;
      background: linear-gradient(90deg, #ffd700 60%, #ffb300 100%);
      color: #23272f;
      border: none;
      border-radius: 30px;
      font-size: 1.1em;
      font-weight: 600;
      cursor: pointer;
      margin-top: 6px;
      transition: background 0.3s, color 0.3s;
    }
    .bid-section button:hover {
      background: #23272f;
      color: #ffd700;
    }
    .balance-section {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(30,40,60,0.06);
      padding: 18px 24px;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 24px;
      justify-content: space-between;
    }
    .balance-section h3 {
      margin: 0;
      font-size: 1.3em;
      color: #1a2238;
      font-weight: 700;
    }
    .balance-section input[type="number"] {
      width: 120px;
      margin-right: 8px;
    }
    .sort-bar {
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .sort-bar label {
      font-weight: 600;
    }
    .bid-history-section {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(30,40,60,0.06);
      padding: 18px 24px;
      margin-top: 32px;
    }
    .bid-history-section h3 {
      margin-top: 0;
      color: #1a2238;
      font-weight: 700;
    }
    .bid-history-section ul {
      padding-left: 18px;
      font-size: 1.1em;
    }
    /* Responsive */
    @media (max-width: 900px) {
      .car {
        flex-direction: column;
        align-items: flex-start;
      }
      .car img {
        width: 100%;
        margin-bottom: 18px;
      }
      .car-details {
        margin-left: 0;
        margin-bottom: 18px;
      }
      .bid-section {
        text-align: left;
        min-width: 0;
      }
    }
    /* Dark Mode Styles */
    body.dark-mode {
      background: #181818;
      color: #eee;
    }
    body.dark-mode header {
      background: #23272f;
    }
    body.dark-mode .dark-mode-btn,
    body.dark-mode #logoutBtn {
      background: #23272f;
      color: #ffd700;
      border: 1px solid #ffd700;
    }
    body.dark-mode .dark-mode-btn:hover,
    body.dark-mode #logoutBtn:hover {
      background: #ffd700;
      color: #23272f;
    }
    body.dark-mode .overview,
    body.dark-mode .login-form,
    body.dark-mode .car,
    body.dark-mode .balance-section,
    body.dark-mode .bid-history-section {
      background: #23272f;
      color: #ffd700;
    }
    body.dark-mode input,
    body.dark-mode select {
      background-color: #444;
      color: #ffd700;
      border-color: #ffd700;
    }
    body.dark-mode .overview button,
    body.dark-mode .login-form button,
    body.dark-mode .bid-section button {
      background: #ffd700;
      color: #23272f;
    }
    body.dark-mode .overview button:hover,
    body.dark-mode .login-form button:hover,
    body.dark-mode .bid-section button:hover {
      background: #23272f;
      color: #ffd700;
    }
    .search-section {
      margin-bottom: 20px;
    }
    .search-box {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .search-box input {
      padding: 8px;
      border: 2px solid #ddd;
      border-radius: 8px;
      width: 300px;
    }
    .watchlist-section {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(30,40,60,0.06);
      padding: 18px 24px;
      margin-top: 32px;
    }
    .watchlist-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #eee;
    }
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 15px 25px;
      border-radius: 8px;
      display: none;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      animation: slideIn 0.3s ease-out;
      max-width: 350px;
      font-size: 0.95em;
    }
    .notification.success {
      background: #4CAF50;
      color: white;
      border-left: 4px solid #2E7D32;
    }
    .notification.warning {
      background: #FFA000;
      color: white;
      border-left: 4px solid #F57C00;
    }
    .notification.error {
      background: #F44336;
      color: white;
      border-left: 4px solid #D32F2F;
    }
    .notification.info {
      background: #2196F3;
      color: white;
      border-left: 4px solid #1976D2;
    }
    .notification-content {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .notification-icon {
      font-size: 1.2em;
    }
    .notification-message {
      flex-grow: 1;
    }
    .notification-close {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 0;
      font-size: 1.2em;
      opacity: 0.8;
      transition: opacity 0.2s;
    }
    .notification-close:hover {
      opacity: 1;
    }
    .notification-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background: rgba(255,255,255,0.3);
      animation: progress 3s linear;
    }
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    @keyframes progress {
      from { width: 100%; }
      to { width: 0%; }
    }
    body.dark-mode .notification {
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .watch-btn {
      background: #ffd700 !important;
      color: #1a2238 !important;
      margin-left: 10px;
    }
    .details-btn {
      background: #ffd700 !important;
      color: #1a2238 !important;
      margin-left: 10px;
    }
    .watch-btn:hover, .details-btn:hover {
      background: #23272f !important;
      color: #ffd700 !important;
    }
    body.dark-mode .search-box input {
      background: #444;
      color: #ffd700;
      border-color: #ffd700;
    }
    body.dark-mode .watchlist-section {
      background: #23272f;
      color: #ffd700;
    }
    body.dark-mode .watchlist-item {
      border-bottom-color: #444;
    }
    .car-details-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
    }
    .modal-content {
      position: relative;
      background: #fff;
      width: 90%;
      max-width: 800px;
      margin: 50px auto;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
    }
    .close-modal {
      position: absolute;
      right: 20px;
      top: 20px;
      font-size: 24px;
      cursor: pointer;
      color: #666;
    }
    .car-details-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-top: 20px;
    }
    .car-image-large {
      width: 100%;
      max-width: 1600px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    .car-specs {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 20px;
    }
    .spec-item {
      background: #f5f6fa;
      padding: 15px;
      border-radius: 8px;
    }
    .spec-item h4 {
      margin: 0 0 5px 0;
      color: #666;
    }
    .spec-item p {
      margin: 0;
      font-size: 1.1em;
      font-weight: 600;
    }
    body.dark-mode .modal-content {
      background: #23272f;
      color: #ffd700;
    }
    body.dark-mode .spec-item {
      background: #1a2238;
    }
    body.dark-mode .spec-item h4 {
      color: #ffd700;
    }
    body.dark-mode .close-modal {
      color: #ffd700;
    }
    @media (max-width: 768px) {
      .car-details-grid {
        grid-template-columns: 1fr;
      }
    }
    .category-filter {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .category-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 20px;
      background: #f0f0f0;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    .category-btn:hover {
      background: #4a90e2;
      color: white;
    }
    .category-btn.active {
      background: #4a90e2;
      color: white;
    }
    body.dark-mode .category-btn {
      background: #1a2238;
      color: #ffd700;
    }
    body.dark-mode .category-btn:hover,
    body.dark-mode .category-btn.active {
      background: #ffd700;
      color: #1a2238;
    }
    .car-stats {
      display: flex;
      gap: 20px;
      margin: 10px 0;
      color: #666;
      font-size: 0.9em;
    }
    .stat-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .stat-item i {
      color: #4a90e2;
    }
    .bidder-list {
      margin-top: 10px;
      font-size: 0.9em;
    }
    .bidder-avatar {
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background: #4a90e2;
      color: white;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-right: 5px;
    }
    body.dark-mode .car-stats {
      color: #ffd700;
    }
    body.dark-mode .stat-item i {
      color: #ffd700;
    }
    .image-gallery {
      position: relative;
      width: 170px;
      height: 120px;
      overflow: hidden;
      border-radius: 12px;
    }
    .gallery-main {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .gallery-thumbnails {
      display: flex;
      gap: 5px;
      margin-top: 5px;
    }
    .gallery-thumbnail {
      width: 40px;
      height: 30px;
      border-radius: 4px;
      cursor: pointer;
      object-fit: cover;
      border: 2px solid transparent;
    }
    .gallery-thumbnail.active {
      border-color: #4a90e2;
    }
    .comments-section {
      margin-top: 15px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    .comment {
      margin-bottom: 10px;
      padding: 8px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .comment-input {
      width: 100%;
      padding: 8px;
      margin-top: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .share-buttons {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .share-btn {
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      color: white;
    }
    .share-btn.facebook { background: #3b5998; }
    .share-btn.twitter { background: #1da1f2; }
    .share-btn.whatsapp { background: #25d366; }
    .price-filter {
      margin-bottom: 20px;
      padding: 15px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .price-range {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .price-range input {
      width: 120px;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    body.dark-mode .comments-section {
      background: #1a2238;
    }
    body.dark-mode .comment {
      background: #23272f;
      color: #ffd700;
    }
    body.dark-mode .price-filter {
      background: #23272f;
      color: #ffd700;
    }
    body.dark-mode .comment-input {
      background: #1a2238;
      color: #ffd700;
      border-color: #ffd700;
    }
    /* Add styles for no auctions message */
    .no-auctions {
      text-align: center;
      padding: 40px 20px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(30,40,60,0.06);
      margin: 20px 0;
    }
    .no-auctions i {
      font-size: 3em;
      color: #ffd700;
      margin-bottom: 15px;
    }
    .no-auctions h3 {
      color: #1a2238;
      margin: 10px 0;
    }
    .no-auctions p {
      color: #666;
      margin: 5px 0;
    }
    body.dark-mode .no-auctions {
      background: #23272f;
    }
    body.dark-mode .no-auctions h3 {
      color: #ffd700;
    }
    body.dark-mode .no-auctions p {
      color: #ccc;
    }
    </style>
      </head>
      <body>
        <header>
          <div class="header-content">
            <span class="logo"><i class="fa-solid fa-car-side"></i> Vintage Car Auction</span>
            <div class="header-actions">
              <button class="dark-mode-btn" onclick="toggleDarkMode()">
                <i class="fa-solid fa-moon"></i> Dark Mode
              </button>
              <button id="logoutBtn" onclick="logout()" style="display: none;">
                <i class="fa-solid fa-right-from-bracket"></i> Logout
              </button>
            </div>
          </div>
        </header>

  <div class="container">
   <div id="overviewPage" class="overview">
  <h2>Auction Guidelines</h2>
  <ul>
    <li><strong>Account Setup:</strong> Create or log in to your account to participate.</li>
    <li><strong>Add Funds:</strong> Ensure your account has sufficient balance before placing bids.</li>
    <li><strong>Bidding Process:</strong> Place your bids in real-time. Each car will have a live countdown timer.</li>
    <li><strong>Winning Criteria:</strong> The highest valid bid when the timer expires secures the vehicle.</li>
    <li><strong>Fair Play:</strong> All bids are final. No bid retractions are allowed once submitted.</li>
  </ul>
  <h3>How to Get Started</h3>
  <ul>
    <li>Register or Log In</li>
    <li>Browse Vintage Cars</li>
    <li>Add Funds to Your Wallet</li>
    <li>Join the Auction and Start Bidding</li>
  </ul>
  <h3>Ready to Join the Action?</h3>
  <button onclick="showLoginPage()" style="background: #ffd700; color: #1a2238;">Login and Start Bidding</button>
</div>

    <div id="loginForm" class="login-form" style="display:none;">
      <h2>Customer Login</h2>
      <input type="text" id="username" placeholder="Username">
      <input type="password" id="password" placeholder="Password">
      <button onclick="login()">Login</button>
      <p>don't have an account?</p>
      <a style="color: cornflowerblue;">Signup</a>
    </div>

    <div id="mainContent">
      <div class="balance-section">
        <h3>Welcome, <span id="userDisplay"></span></h3>
        <p>Balance: ₹<span id="balance">0</span></p>
        <input type="number" id="funds" placeholder="Add funds">
        <button onclick="addFunds()">Add Funds</button>
      </div>

      <div class="search-section">
        <div class="search-box">
          <input type="text" id="searchInput" placeholder="Search cars by name or location...">
          <button onclick="searchCars()"><i class="fas fa-search"></i></button>
        </div>
      </div>

      <div class="sort-bar">
        <label for="sort">Sort Cars By:</label>
        <select id="sort" onchange="sortCars()">
          <option value="name">Name</option>
          <option value="price">Current Bid</option>
          <option value="time">Time Left</option>
        </select>
      </div>

      <div class="category-filter">
        <button class="category-btn active" onclick="filterByCategory('all')">All Cars</button>
        <button class="category-btn" onclick="filterByCategory('american')">American</button>
        <button class="category-btn" onclick="filterByCategory('german')">German</button>
        <button class="category-btn" onclick="filterByCategory('italian')">Italian</button>
        <button class="category-btn" onclick="filterByCategory('british')">British</button>
        <button class="category-btn" onclick="filterByCategory('japanese')">Japanese</button>
      </div>

      <div id="carsContainer"></div>

      <div class="watchlist-section">
        <h3>Your Watchlist</h3>
        <div id="watchlistContainer"></div>
      </div>

      <div class="bid-history-section">
        <h3>Your Bid History</h3>
        <ul id="bidHistory"></ul>
      </div>
    </div>
  </div>

  <div id="notification" class="notification">
    <div class="notification-content">
      <span class="notification-icon"></span>
      <span class="notification-message"></span>
      <button class="notification-close" onclick="closeNotification()">&times;</button>
    </div>
    <div class="notification-progress"></div>
  </div>

  <div id="carDetailsModal" class="car-details-modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeCarDetails()">&times;</span>
      <div id="modalContent"></div>
    </div>
  </div>

  <script>
    let currentUser = "";
    let userBalance = 0;
    let bidHistory = [];
    let watchlist = [];
    let lastBids = {};

    function generateRandomViews() {
      return Math.floor(Math.random() * (5000 - 500) + 500);
    }

    const cars = [
      {
        name: "1965 Ford Mustang",
        location: "Bangalore,Karnataka",
        image: "mustang.jpg",
        currentBid: 120000,
        timer: 900, // 15 minutes in seconds
        id: 1,
        category: "american",
        views: generateRandomViews(),
        totalBids: 23,
        comments: [
          { user: "Rahul Sharma", text: "Beautiful condition!", time: "2 hours ago" },
          { user: "Priya Patel", text: "Is this the original paint?", time: "1 hour ago" }
        ],
        bidders: [
          { name: "Rahul Sharma", bid: 115000 },
          { name: "Priya Patel", bid: 110000 },
          { name: "Arjun Singh", bid: 105000 }
        ],
        details: {
          year: "1965",
          make: "Ford",
          model: "Mustang",
          engine: "289 V8",
          transmission: "4-speed manual",
          mileage: "45,000",
          color: "Red",
          condition: "Excellent",
          features: ["Original interior", "Matching numbers", "Restored engine"],
          history: "One owner, fully documented restoration"
        }
      },
      {
        name: "1957 Chevrolet Bel Air",
        location: "Bhubaneswar, Odisha",
        image: "bel.jpg",
        currentBid: 140000,
        timer: 150, // 2 minutes 30 seconds
        id: 2,
        category: "american",
        views: generateRandomViews(),
        totalBids: 15,
        comments: [
          { user: "Vikram Malhotra", text: "Stunning color!", time: "3 hours ago" },
          { user: "Ananya Reddy", text: "Perfect for summer cruising", time: "2 hours ago" }
        ],
        bidders: [
          { name: "Vikram Malhotra", bid: 135000 },
          { name: "Ananya Reddy", bid: 130000 },
          { name: "Rajesh Kumar", bid: 125000 }
        ],
        details: {
          year: "1957",
          make: "Chevrolet",
          model: "Bel Air",
          engine: "283 V8",
          transmission: "3-speed automatic",
          mileage: "32,000",
          color: "Turquoise",
          condition: "Very Good",
          features: ["Power steering", "Power brakes", "Original radio"],
          history: "Two owners, partial restoration"
        }
      },
      {
        name: "1963 Jaguar E-Type",
        location: "Udaipur, Rajasthan",
        image: "jaguar.jpg",
        currentBid: 200000,
        timer: 150, // 2 minutes 30 seconds
        id: 3,
        category: "british",
        views: generateRandomViews(),
        totalBids: 31,
        comments: [
          { user: "Aditya Verma", text: "A true classic!", time: "4 hours ago" },
          { user: "Meera Kapoor", text: "The interior is immaculate", time: "3 hours ago" }
        ],
        bidders: [
          { name: "Aditya Verma", bid: 195000 },
          { name: "Meera Kapoor", bid: 190000 },
          { name: "Suresh Iyer", bid: 185000 }
        ],
        details: {
          year: "1963",
          make: "Jaguar",
          model: "E-Type",
          engine: "4.2L Inline-6",
          transmission: "4-speed manual",
          mileage: "28,000",
          color: "British Racing Green",
          condition: "Concours",
          features: ["Wire wheels", "Wood steering wheel", "Leather interior"],
          history: "Matching numbers, concours restoration"
        }
      },
      {
        name: "1970 Dodge Charger",
        location: "Chittorgarh, Rajasthan",
        image: "dodge.jpg",
        currentBid: 180000,
        timer: 150, // 2 minutes 30 seconds
        id: 4,
        category: "american",
        views: generateRandomViews(),
        totalBids: 27,
        comments: [
          { user: "Karan Mehta", text: "Mean looking machine!", time: "5 hours ago" },
          { user: "Neha Gupta", text: "Love the black paint", time: "4 hours ago" }
        ],
        bidders: [
          { name: "Karan Mehta", bid: 175000 },
          { name: "Neha Gupta", bid: 170000 },
          { name: "Amit Shah", bid: 165000 }
        ],
        details: {
          year: "1970",
          make: "Dodge",
          model: "Charger",
          engine: "440 Magnum V8",
          transmission: "3-speed automatic",
          mileage: "52,000",
          color: "Black",
          condition: "Excellent",
          features: ["Bucket seats", "Console", "Rallye dash"],
          history: "Three owners, numbers matching"
        }
      }
    ];

    function login() {
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;

      if ((username === "pratyush" && password === "admin123") || 
          (username === "user" && password === "user123")) {
        currentUser = username;
        document.getElementById("loginForm").style.display = "none";
        document.getElementById("mainContent").style.display = "block";
        document.getElementById("overviewPage").style.display = "none";
        document.getElementById("userDisplay").textContent = username;
        document.getElementById("logoutBtn").style.display = "inline-block";
        renderCars();
        startCountdowns();
        showNotification(`Welcome back, ${username}!`, "success");
      } else {
        showNotification("Invalid username or password. Try pratyush/admin123 or user/user123", "error");
      }
    }

    function logout() {
      currentUser = "";
      userBalance = 0;
      bidHistory = [];
      document.getElementById("mainContent").style.display = "none";
      document.getElementById("overviewPage").style.display = "block";
      document.getElementById("logoutBtn").style.display = "none";
      document.getElementById("balance").textContent = "0";
      document.getElementById("funds").value = "";
      document.getElementById("bidHistory").innerHTML = "";
      document.getElementById("loginForm").style.display = "none";
      showNotification("You have been logged out successfully.", "info");
    }

    function showLoginPage() {
      document.getElementById("overviewPage").style.display = "none";
      document.getElementById("loginForm").style.display = "block";
      document.getElementById("mainContent").style.display = "none";
      document.getElementById("logoutBtn").style.display = "none";
    }

    function addFunds() {
      const funds = parseInt(document.getElementById("funds").value);
      if (!isNaN(funds) && funds > 0) {
        userBalance += funds;
        document.getElementById("balance").textContent = userBalance;
        showNotification(`Successfully added ₹${funds.toLocaleString()} to your balance!`, "success");
      } else {
        showNotification("Please enter a valid amount.", "error");
      }
    }

    function placeBid(carId) {
      const car = cars.find(c => c.id === carId);
      if (car.timer <= 0) {
        showNotification("Auction has ended for this car. You cannot place a bid.", "error");
        return;
      }
      const bidInput = document.getElementById("bid-" + carId);
      const newBid = parseInt(bidInput.value);

      if (newBid > car.currentBid) {
        if (userBalance >= newBid) {
          car.totalBids++;
          car.views++;
          
          car.bidders.unshift({ name: currentUser, bid: newBid });
          if (car.bidders.length > 3) car.bidders.pop();

          if (lastBids[carId] && lastBids[carId] !== currentUser) {
            showNotification(`You've been outbid on ${car.name}!`, "warning");
          }
          
          car.currentBid = newBid;
          lastBids[carId] = currentUser;
          userBalance -= newBid;
          bidHistory.push(`${car.name}: ₹${newBid}`);
          updateUI();
          showNotification(`Successfully placed bid of ₹${newBid.toLocaleString()} on ${car.name}!`, "success");
        } else {
          showNotification("Not enough balance to place this bid.", "error");
        }
      } else {
        showNotification("Bid must be higher than the current bid.", "error");
      }
    }

    function updateUI() {
      document.getElementById("balance").textContent = userBalance;
      renderCars();
      const bidList = document.getElementById("bidHistory");
      bidList.innerHTML = "";
      bidHistory.forEach(bid => {
        const li = document.createElement("li");
        li.textContent = bid;
        bidList.appendChild(li);
      });
    }

    function renderCars(carsToRender = cars) {
      const container = document.getElementById("carsContainer");
      container.innerHTML = "";
      carsToRender.forEach(car => {
        const isAuctionEnded = car.timer <= 0;
        const carDiv = document.createElement("div");
        carDiv.className = "car";
        carDiv.innerHTML = `
          <img src="${car.image}" alt="${car.name}">
          <div class="car-details">
            <h2>${car.name}</h2>
            <p>Location: ${car.location}</p>
            <div class="car-stats">
              <div class="stat-item">
                <i class="fas fa-eye"></i>
                <span>${car.views.toLocaleString()} views</span>
              </div>
              <div class="stat-item">
                <i class="fas fa-gavel"></i>
                <span>${car.totalBids} bids</span>
              </div>
              <div class="stat-item">
                <i class="fas fa-users"></i>
                <span>${car.bidders.length} bidders</span>
              </div>
            </div>
            <p>Current Bid: ₹<span id="currentBid-${car.id}">${car.currentBid.toLocaleString()}</span></p>
            <p class="timer">Auction Ends In: <span id="timer-${car.id}">${formatTime(car.timer)}</span></p>
            <div class="bidder-list">
              <p>Recent Bidders:</p>
              ${car.bidders.map(bidder => `
                <div class="stat-item">
                  <span class="bidder-avatar">${bidder.name.charAt(0)}</span>
                  <span>${bidder.name} - ₹${bidder.bid.toLocaleString()}</span>
                </div>
              `).join('')}
            </div>
            <div class="comments-section">
              <h4>Comments</h4>
              <div class="comments-list">
                ${car.comments.map(comment => `
                  <div class="comment">
                    <strong>${comment.user}</strong>
                    <span style="color: #666; font-size: 0.8em;">${comment.time}</span>
                    <p>${comment.text}</p>
                  </div>
                `).join('')}
              </div>
              <input type="text" class="comment-input" placeholder="Add a comment..." 
                     onkeypress="addComment(event, ${car.id})">
            </div>
            <p id="endMsg-${car.id}" style="color: green;"></p>
          </div>
          <div class="bid-section">
            <label>Your Bid: ₹</label>
            <input type="number" id="bid-${car.id}" min="${car.currentBid + 1}" ${isAuctionEnded ? "disabled" : ""}>
            <button onclick="placeBid(${car.id})" ${isAuctionEnded ? "disabled" : ""}>Place Bid</button>
            <button onclick="addToWatchlist(${car.id})" class="watch-btn">${watchlist.includes(car.id) ? "Watching" : "Watch"}</button>
            <button onclick="showCarDetails(${car.id})" class="details-btn">View Details</button>
          </div>
        `;
        container.appendChild(carDiv);
      });
    }

    function searchCars() {
      const searchTerm = document.getElementById("searchInput").value.toLowerCase();
      const filteredCars = cars.filter(car => 
        car.name.toLowerCase().includes(searchTerm) ||
        car.location.toLowerCase().includes(searchTerm)
      );
      renderCars(filteredCars);
    }

    function addToWatchlist(carId) {
      const car = cars.find(c => c.id === carId);
      if (!watchlist.includes(carId)) {
        watchlist.push(carId);
        showNotification(`${car.name} added to your watchlist!`, "success");
        updateWatchlist();
      } else {
        showNotification(`${car.name} is already in your watchlist.`, "info");
      }
    }

    function removeFromWatchlist(carId) {
      watchlist = watchlist.filter(id => id !== carId);
      updateWatchlist();
    }

    function updateWatchlist() {
      const container = document.getElementById("watchlistContainer");
      container.innerHTML = "";
      watchlist.forEach(carId => {
        const car = cars.find(c => c.id === carId);
        const div = document.createElement("div");
        div.className = "watchlist-item";
        div.innerHTML = `
          <span>${car.name} - Current Bid: ₹${car.currentBid}</span>
          <button onclick="removeFromWatchlist(${carId})">Remove</button>
        `;
        container.appendChild(div);
      });
    }

    function showNotification(message, type = 'info') {
      const notification = document.getElementById("notification");
      const icon = notification.querySelector(".notification-icon");
      const messageEl = notification.querySelector(".notification-message");
      
      // Set notification type and icon
      notification.className = `notification ${type}`;
      
      // Set icon based on type
      switch(type) {
        case 'success':
          icon.innerHTML = '<i class="fas fa-check-circle"></i>';
          break;
        case 'warning':
          icon.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
          break;
        case 'error':
          icon.innerHTML = '<i class="fas fa-times-circle"></i>';
          break;
        case 'info':
          icon.innerHTML = '<i class="fas fa-info-circle"></i>';
          break;
      }
      
      messageEl.textContent = message;
      notification.style.display = "block";
      
      // Auto close after 3 seconds
      setTimeout(() => {
        if (notification.style.display === "block") {
          closeNotification();
        }
      }, 3000);
    }

    function closeNotification() {
      const notification = document.getElementById("notification");
      notification.style.display = "none";
    }

    function startCountdowns() {
      let lastUpdate = Date.now();
      
      function updateTimers() {
        const now = Date.now();
        const deltaTime = Math.floor((now - lastUpdate) / 1000);
        lastUpdate = now;
        
        cars.forEach(car => {
          if (car.timer > 0) {
            car.timer = Math.max(0, car.timer - deltaTime);
            const timerElement = document.getElementById(`timer-${car.id}`);
            if (timerElement) {
              timerElement.textContent = formatTime(car.timer);
            }
            if (car.timer === 0) {
              const endMsgElement = document.getElementById(`endMsg-${car.id}`);
              if (endMsgElement) {
                endMsgElement.textContent = `Auction Ended. Highest Bid: ₹${car.currentBid.toLocaleString()}`;
              }
              renderCars();
            }
          }
        });
      }

      if (window.countdownInterval) {
        clearInterval(window.countdownInterval);
      }
      
      window.countdownInterval = setInterval(updateTimers, 1000);
    }

    function formatTime(seconds) {
      const hours = Math.floor(seconds / 3600);
      const minutes = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function filterByCategory(category) {
      const filteredCars = cars.filter(car => car.category === category || category === 'all');
      renderCars(filteredCars);
    }

    function sortCars() {
      const sortBy = document.getElementById("sort").value;
      const sortedCars = [...cars].sort((a, b) => {
        if (sortBy === "name") {
          return a.name.localeCompare(b.name);
        } else if (sortBy === "price") {
          return b.currentBid - a.currentBid;
        } else if (sortBy === "time") {
          return a.timer - b.timer;
        }
      });
      renderCars(sortedCars);
    }

    function addComment(event, carId) {
      if (event.key === 'Enter') {
        const input = event.target;
        const comment = input.value.trim();
        if (comment) {
          const car = cars.find(c => c.id === carId);
          car.comments.unshift({
            user: currentUser,
            text: comment,
            time: 'Just now'
          });
          
          // Find the car's comment section
          const carDiv = document.querySelector(`.car:nth-child(${carId})`);
          if (carDiv) {
            const commentsSection = carDiv.querySelector('.comments-section');
            if (commentsSection) {
              // Create new comment element
              const newComment = document.createElement('div');
              newComment.className = 'comment';
              newComment.innerHTML = `
                <strong>${currentUser}</strong>
                <span style="color: #666; font-size: 0.8em;">Just now</span>
                <p>${comment}</p>
              `;
              
              // Insert the new comment at the top of the comments section
              const commentsList = commentsSection.querySelector('.comments-list') || commentsSection;
              commentsList.insertBefore(newComment, commentsList.firstChild);
              
              // Clear the input
              input.value = '';
            }
          }
        }
      }
    }

    function showCarDetails(carId) {
      const car = cars.find(c => c.id === carId);
      const detailsHtml = `
        <h2>${car.name}</h2>
        <p>Location: ${car.location}</p>
        <p>Year: ${car.details.year}</p>
        <p>Make: ${car.details.make}</p>
        <p>Model: ${car.details.model}</p>
        <p>Engine: ${car.details.engine}</p>
        <p>Transmission: ${car.details.transmission}</p>
        <p>Mileage: ${car.details.mileage}</p>
        <p>Color: ${car.details.color}</p>
        <p>Condition: ${car.details.condition}</p>
        <p>Features: ${car.details.features.join(', ')}</p>
        <p>History: ${car.details.history}</p>
      `;
      document.getElementById("modalContent").innerHTML = detailsHtml;
      document.getElementById("carDetailsModal").style.display = "block";
    }

    function closeCarDetails() {
      document.getElementById("carDetailsModal").style.display = "none";
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
      const darkModeBtn = document.querySelector('.dark-mode-btn');
      const icon = darkModeBtn.querySelector('i');
      
      if (document.body.classList.contains("dark-mode")) {
        icon.className = "fa-solid fa-sun";
        darkModeBtn.innerHTML = '<i class="fa-solid fa-sun"></i> Light Mode';
      } else {
        icon.className = "fa-solid fa-moon";
        darkModeBtn.innerHTML = '<i class="fa-solid fa-moon"></i> Dark Mode';
      }
    }

    // Initialize the page
    window.onload = function() {
      // Initial state: show overview, hide login and main content, hide logout
      document.getElementById("overviewPage").style.display = "block";
      document.getElementById("loginForm").style.display = "none";
      document.getElementById("mainContent").style.display = "none";
      document.getElementById("logoutBtn").style.display = "none";
      
      // Start the countdown timers
      startCountdowns();
    };
  </script>
</body>
</html>